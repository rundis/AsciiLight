var asciidoctor = require('asciidoctor.js')();
var processor = asciidoctor.Asciidoctor(true);
var opal = asciidoctor.Opal;


var doConvert = function(content, baseDir) {
  var opts = opal.hash2(
      ['base-dir', 'safe', 'attributes'],
      {'base-dir': baseDir,
       'safe': 'secure',
        attributes: ['icons=font@', 'showtitle']});

    return  processor.$convert(content, opts);
};

module.exports = {
  convert: function(content, baseDir) {
    return doConvert(content, baseDir);
  }
}
